library(swiMap)
library(swiMap)
canton_CH
library(swiMap)
canton_namesStrict
?canton_namesStrict
canton_query <- c('Argovie', 'Appenzell Rh.-I.', 'St. Gallen', 'Zürich)
canton_query <- c('Argovie', 'Appenzell Rh.-I.', 'St. Gallen', 'Zürich')
canton_namesStrict(canton_query)
library(swiMap)
canton_query <- c('Argovie', 'Appenzell Rh.-I.', 'St. Gallen', 'Zürich')
canton_namesStrict(canton_query)
canton_query <- c('Argovie', 'Appenzell Rh.-I.', 'St. Gallen', 'Zürich', 'randomChar', 'Vaudx')
canton_namesStrict(canton_query)
library(swiMap)
?canton_namesStrict
canton_query <- c('Argovie', 'Appenzell Rh.-I.', 'St. Gallen', 'Zürich', 'randomChar', 'Vaudx')
canton_namesStrict(canton_query)
canton_query <- c('Argovie', 'Appenzell Rh.-I.', 'St. Gallen', 'Zürich', 'randomChar', 'Vaudx')
library(swiMap)
canton_query <- c('Argovie', 'Appenzell Rh.-I.', 'St. Gallen', 'Zürich', 'randomChar', 'Vaudx')
> canton_namesStrict(canton_query)
canton_namesStrict(canton_query)
library(swiMap)
canton_namesStrict(canton_query)
canton_query <- c('Argovie', 'Appenzell Rh.-I.', 'St. Gallen', 'Zürich', 'randomChar', 'Vaudx')
canton_namesStrict(canton_query)
canton_namesStrict <- function(query, output = 'iso2') {
stopifnot(exists("canton_CH"))
if (!output %in% colnames(canton_CH) || length(output) != 1) {
stop ("output needs to be one of:", paste(colnames(canton_CH), collapse =" "))
}
result <- query
for(i in 1:length(query)) {
q <- query[i]
nrow <- which(q == canton_CH, T)
if(length(nrow) == 0) {
warning("\n", q, "could not be matched! q", " returned.")
}
if(length(unique(nrow[,1])) > 1) {
warning("\n", q, "matched multiple cantons! q", " returned.")
}
if(length(nrow) == 1) {
q <- as.character(canton_CH[unique(nrow[,1]),output])
}
result[i] <- q
}
result
}
output = 'iso2')
output = 'iso2'
query <- c('Argovie', 'Appenzell Rh.-I.', 'St. Gallen', 'Zürich', 'randomChar', 'Vaudx')
stopifnot(exists("canton_CH"))
if (!output %in% colnames(canton_CH) || length(output) != 1) {
stop ("output needs to be one of:", paste(colnames(canton_CH), collapse =" "))
}
result <- query
query
i <- 5
q <- query[i]
nrow <- which(q == canton_CH, T)
nrow
if(length(nrow) == 0) {
warning("\n", q, "could not be matched! q", " returned.")
}
if(length(unique(nrow[,1])) > 1) {
warning("\n", q, "matched multiple cantons! q", " returned.")
}
if(length(nrow) == 1) {
q <- as.character(canton_CH[unique(nrow[,1]),output])
}
q <- query[i]
nrow <- which(q == canton_CH, T)
if(length(nrow) == 0) {
warning("\n", q, " could not be matched!", q, " returned instead!")
}
if(length(unique(nrow[,1])) > 1) {
warning("\n", q, " matched multiple cantons!", q, " returned instead!")
}
if(length(nrow) == 1) {
q <- as.character(canton_CH[unique(nrow[,1]),output])
}
q
result <- query
for(i in 1:length(query)) {
q <- query[i]
nrow <- which(q == canton_CH, T)
if(length(nrow) == 0) {
warning("\n", q, " could not be matched!", q, " returned instead!")
}
if(length(unique(nrow[,1])) > 1) {
warning("\n", q, " matched multiple cantons!", q, " returned instead!")
}
if(length(nrow) == 1) {
q <- as.character(canton_CH[unique(nrow[,1]),output])
}
result[i] <- q
}
result
i <- 1
q <- query[i]
nrow <- which(q == canton_CH, T)
if(length(nrow) == 0) {
warning("\n", q, " could not be matched!", q, " returned instead!")
}
if(length(unique(nrow[,1])) > 1) {
warning("\n", q, " matched multiple cantons!", q, " returned instead!")
}
if(length(nrow) == 1) {
q <- as.character(canton_CH[unique(nrow[,1]),output])
}
result[i] <- q
result
i
result[i]
length(nrow)
nrow
result <- query
for(i in 1:length(query)) {
q <- query[i]
nrow <- which(q == canton_CH, T)
if(length(nrow) == 0) {
warning("\n", q, " could not be matched!", q, " returned instead!")
}
if(length(unique(nrow[,1])) > 1) {
warning("\n", q, " matched multiple cantons!", q, " returned instead!")
}
if(length(unique(nrow[,1])) == 1) {
q <- as.character(canton_CH[unique(nrow[,1]),output])
}
result[i] <- q
}
result
result <- query
for(i in 1:length(query)) {
q <- query[i]
nrow <- which(q == canton_CH, T)
if(length(nrow) == 0) {
warning("\n", q, " could not be matched!\t", q, " returned instead!")
}
if(length(unique(nrow[,1])) > 1) {
warning("\n", q, " matched multiple cantons!\t", q, " returned instead!")
}
if(length(unique(nrow[,1])) == 1) {
q <- as.character(canton_CH[unique(nrow[,1]),output])
} else {
q <- NA
}
result[i] <- q
}
result
result <- query
for(i in 1:length(query)) {
q <- query[i]
nrow <- which(q == canton_CH, T)
if(length(nrow) == 0) {
warning("\n", q, " could not be matched!\t", "NA returned instead!")
}
if(length(unique(nrow[,1])) > 1) {
warning("\n", q, " matched multiple cantons!\t", "NA returned instead!")
}
if(length(unique(nrow[,1])) == 1) {
q <- as.character(canton_CH[unique(nrow[,1]),output])
} else {
q <- NA
}
result[i] <- q
}
library(swiMap)
canton_CH
canton_namesStrict(canton_query, output = "english")
library(swiMap)
canton_namesStrict
?canton_namesStrict
canton_query <- c('Argovie', 'Appenzell Rh.-I.', 'St. Gallen', 'Zürich', 'randomChar', 'Vaudx')
canton_namesStrict(canton_query)
canton_namesStrict(canton_query, output = "english")
canton_namesStrict(canton_query, "iso2")
result <- query
for(i in 1:length(query)) {
q <- query[i]
nrow <- which(q == canton_CH, T)
if(length(nrow) == 0) {
warning("\n", q, " could not be matched!\t", "NA returned instead!")
}
if(length(unique(nrow[,1])) > 1) {
warning("\n", q, " matched multiple cantons!\t", "NA returned instead!")
}
if(length(unique(nrow[,1])) == 1) {
q <- as.character(canton_CH[unique(nrow[,1]),output])
} else {
q <- NA
}
result[i] <- q
}
result
stopifnot(exists("canton_CH"))
if (!output %in% colnames(canton_CH) || length(output) != 1) {
stop ("output needs to be one of:", paste(colnames(canton_CH), collapse =" "))
}
result <- query
for(i in 1:length(query)) {
q <- query[i]
nrow <- which(q == canton_CH, T)
if(length(nrow) == 0) {
warning("\n", q, " could not be matched!\t", "NA returned instead!")
}
if(length(unique(nrow[,1])) > 1) {
warning("\n", q, " matched multiple cantons!\t", "NA returned instead!")
}
if(length(unique(nrow[,1])) == 1) {
q <- as.character(canton_CH[unique(nrow[,1]),output])
} else {
q <- NA
}
result[i] <- q
}
result
result
library(swiMap)
canton_query <- c('Argovie', 'Appenzell Rh.-I.', 'St. Gallen', 'Zürich', 'randomChar', 'Vaudx')
canton_namesStrict(canton_query)
canton_namesStrict(canton_query, output = "english")
library(swiMap)
library(swiMap)
?canton_namesStrict
canton_query <- c('Argovie', 'Appenzell Rh.-I.', 'St. Gallen', 'Zürich', 'randomChar', 'Vaudx')
canton_namesStrict(canton_query)
canton_namesStrict(canton_query, output = "english")
library(swiMap)
canton_query <- c('Argovie', 'Appenzell Rh.-I.', 'St. Gallen', 'Zürich', 'randomChar', 'Vaudx')
canton_namesStrict(canton_query)
canton_namesStrict(canton_query, output = "english")
canton_namesStrict
library(swiMap)
library(swiMap)
library(swiMap)
?canton_namesStrict
canton_namesStrict
library(swiMap)
library(swiMap)
?canton_namesStrict
print(canton_CH)
canton_query <- c('Argovie', 'Appenzell Rh.-I.', 'St. Gallen', 'Zürich', 'randomChar', 'Vaudx')
canton_namesStrict(canton_query)
canton_namesStrict(canton_query, output = "english")
canton_namesStrict
library(swiMap)
canton_namesStrict
library(swiMap)
library(swiMap)
canton_namesStrict
library(swiMap)
library(swiMap)
canton_namesStrict
library(swiMap)
?formatShp
library(swiMap)
library(swiMap)
library(swiMap)
library(swiMap)
library(swiMap)
library(swiMap)
library(swiMap)
library(swiMap)
library(swiMap)
?getShpLayers
require(rgdal)
require(rgeos)
require(ggplot2)
path <- getPathShp('world')
layers <-  ogrListLayers(path)
layers
layers[1]
world <- readOGR(path, layer = layers[1])
world.df <- formatShp(world)
# plot world map
ggplot(world.df, aes(x = long, y = lat, group = group)) + geom_polygon(size = 0.01, aes(fill = FIPS)) +
theme_minimal() + theme(legend.position = "none", panel.grid = element_blank(), axis.ticks = element_blank(), axis.title = element_blank(), axis.text = element_blank())
Same with swiss commune map (slow!)
path.ch <- getPathShp('CH')
ch <- readOGR(path.ch, layer = 'municipalities')
ch.df <- formatShp(ch)
# plot swiss commune map
ch.communes <- ggplot(ch.df, aes(x = long, y = lat, group = group)) + geom_polygon(size = 0.01, aes(fill = GEMNAME)) +
theme_minimal() + theme(legend.position = "none", panel.grid = element_blank(), axis.ticks = element_blank(), axis.title = element_blank(), axis.text = element_blank())
ch.communes
# add the lake and country contours
lake.df <- formatShp(readOGR(path.ch, layer = "lakes"))
ogrListLayers(path.ch)
path.ch <- getPathShp('CH')
ch <- readOGR(path.ch, layer = 'municipalities-without-lakes')
ch.df <- formatShp(ch)
ch.communes <- ggplot(ch.df, aes(x = long, y = lat, group = group)) + geom_polygon(size = 0.01, aes(fill = GEMNAME)) +
theme_minimal() + theme(legend.position = "none", panel.grid = element_blank(), axis.ticks = element_blank(), axis.title = element_blank(), axis.text = element_blank())
ch.communes
lake.df <- formatShp(readOGR(path.ch, layer = "lakes"))
ogrListLayers(file.path(path.ch, "ch-country.ch"))
ogrListLayers(file.path(path.ch, "ch-country.ch"))
path.ch
require(rgdal)
require(rgeos)
require(ggplot2)
path <- getPathShp('world')
layers <- getShpLayers(path)
# read shapefiles for given layer
world <- readOGR(path, layer = layers[1])
world.df <- formatShp(world)
# plot world map
ggplot(world.df, aes(x = long, y = lat, group = group)) + geom_polygon(size = 0.01, aes(fill = FIPS)) +
theme_minimal() + theme(legend.position = "none", panel.grid = element_blank(), axis.ticks = element_blank(), axis.title = element_blank(), axis.text = element_blank())
Same with swiss commune map (slow!)
## Not run:
path.ch <- getPathShp('CH')
ch <- readOGR(path.ch, layer = 'municipalities')
ch.df <- formatShp(ch)
# plot swiss commune map
ch.communes <- ggplot(ch.df, aes(x = long, y = lat, group = group)) + geom_polygon(size = 0.01, aes(fill = GEMNAME)) +
theme_minimal() + theme(legend.position = "none", panel.grid = element_blank(), axis.ticks = element_blank(), axis.title = element_blank(), axis.text = element_blank())
ch.communes
# add the lake and country contours
lake.df <- formatShp(readOGR(path.ch, layer = "lakes"))
country.layers
ch.communes + geom_polygon(data = country.df, fill = NA, color = "black", size = 2) + geom_polygon(data = lake.df, fill = "lightgrey", colour = "lightgrey")
country.df <- readOGR(file.path(path.ch, "ch-country.json"), country.layers[1])
library(swiMap)
library(swiMap)
ch.communes + geom_polygon(data = country.df, fill = NA, color = "black", size = 0.1) + geom_polygon(data = lake.df, fill = "lightgrey", colour = "lightgrey")
ch.communes + geom_polygon(data = lake.df, fill = "blue", colour = "blue")
ch.communes <- ggplot(ch.df, aes(x = long, y = lat, group = group)) + geom_polygon(size = 0, aes(fill = GEMNAME)) +
theme_minimal() + theme(legend.position = "none", panel.grid = element_blank(), axis.ticks = element_blank(), axis.title = element_blank(), axis.text = element_blank())
ch.communes
bfsnName <- ch.df[!duplicated(ch.df$BFSNR),c('BFSNR', 'GEMNAME')]
bfsnName[order(bfsnName[,1]),]
library(swiMap)
library(swiMap)
